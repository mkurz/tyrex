<html>
  <body>
    <p><b>Connector API</b></p>

    <dl>
      <dt><b>Version: </b></dt><dd>$Revision: 1.4 $ $Date: 2000/09/08 23:04:44 $</dd>
      <dt><b>Author: </b></dt><dd><a href="mailto:arkin@intalio.com">Assaf Arkin</a></dd>
      <dt><b>Note: </b></dt><dd>Temporary API subject to change</dd>
    </dl>

    <p>This package defines an API for developing connectors. Connectors are based on the
       JDBC 2.0 DataSource design patterns but are supported by a generic connection
       manager. They are listed in the JNDI environment naming context, and are pooled and
       transaction demarcated by the connection manager.</p>

    <h3>ManagedConnection</h3>

    <p>A connection that is managed by the connection manager is encapsulated in an
       object of type {@link tyrex.ManagedConnection}. This object allows the connection
       manager to pool connections, share connections in the same thread, manage the
       connections' transaction enlistment, etc.</p>

    <p>The application connection is obtained from {@link tyrex.ManagedConnection#getConnection}
       and is a handle to the underlying connection (represented by the managed connection).
       The connection manager may dissociate the application handle from the underlying
       connection across method invocations. When the application closes the handle, the handle
       is returned to the connection pool and can be reused by future requests.</p>

    <h3>ConnectionAdapter</h3>

    <p>Since the semantics of acquiring a connection for the application are different than
       acquiring a managed connection for the connection pool (compared DataSource with
       XADataSource), adaptors are used that present the connection manager to the application.</p>

    <p>For example, the application requires a connection to an ERP system of type <tt>ERPConnection</tt>.
       The factory for obtaining such a connection is of type <tt>ERPConnector</tt>.
       The application will use the JNDI ENC to lookup the factory and open a connection
       as follows:

       <pre>
InitialContext ctx;
ERPConnector   connector;
ERPConnection  connection;

<font color="red">// Obtain the connector from JNDI</font>
ctx = new InitialContext();
connector = (ERPConnector) ctx.lookup( "java:comp/env/erp/MyERP" );
<font color="red">// Use it to open up a connection</font>
connection = connector.getConnection();
<font color="red">// Use the connection</font>
. . .
<font color="red">// Close the connection</font>
connection.close();
       </pre></p>

    <p>The connector manager will enlist a factory of type <tt>ERPConnector</tt> in the JNDI ENC.
       The factory is associated with a connection manager that manages pooling and transaction
       enlistment on the connection. When the factory is asked by the application to return a new
       connection, it calls the <tt>getConnection</tt> method on the connection manager and
       hands that connection to the application.</p>

    <p>The following configuration will be used to enable the above example:
       <pre>
<font color="red">&lt;!-- Definition of the connector type --&gt;</font>
&lt;connector res-type="ERPConnector"
           factory-class="ERPConnectorFactory"/&gt;

<font color="red">&lt;!-- Configuration of a resource for this connector --&gt;</font>
&lt;resource name="erp/MyERP"
          type="ERPConnector"&gt;
  &lt;properties . . . /&gt;
&lt;/resource&gt;
       </pre></p>

  </body>
</html>